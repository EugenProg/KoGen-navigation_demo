# KoGen Navigation: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**KoGen Navigation** ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è Jetpack Compose, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é (KSP) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π (type-safe) –∏ —É–¥–æ–±–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –∏–∑–±–∞–≤–ª—è—è –≤–∞—Å –æ—Ç —Ä—É—Ç–∏–Ω–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞ –≤ **Maven Central**. –ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è, –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–æ–≤.

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–ª–∞–≥–∏–Ω KSP

–°–Ω–∞—á–∞–ª–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–ª–∞–≥–∏–Ω KSP –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –≤–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É.

**–í —Ñ–∞–π–ª–µ `build.gradle.kts` –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
```kotlin
plugins {
    // ...
    id("com.google.devtools.ksp") version "2.1.0-1.0.29" apply false
}
```
**–í–∞–∂–Ω–æ:** *–ë—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã —Å –≤–µ—Ä—Å–∏—è–º–∏. –í–µ—Ä—Å–∏—è KSP `2.1.0-1.0.29` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–∞ –≤–µ—Ä—Å–∏—è Kotlin `2.1.0` –≤ –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ. –í—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—è–π—Ç–µ—Å—å —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ KSP](https://github.com/google/ksp/releases).*

**–í —Ñ–∞–π–ª–µ `build.gradle.kts` –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è:**
```kotlin
plugins {
    // ...
    id("com.google.devtools.ksp")
}
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–í `dependencies` –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è –¥–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: —Å–∞–º—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É Jetpack Navigation, KoGen Navigation –∏ –µ–µ KSP-–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä.

```kotlin
dependencies {
    // –°–∞–º–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ Jetpack Navigation
    implementation("androidx.navigation:navigation-compose:2.7.7")

    // KoGen Navigation
    implementation("io.github.eugenprog:navigation-compose:1.0.0")
    ksp("io.github.eugenprog:navigation-compose:1.0.0")
}
```
**–í–∞–∂–Ω–æ:** *–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫. –í–µ—Ä—Å–∏–∏ –¥–ª—è `implementation` –∏ `ksp` –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å.*

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é

–í `build.gradle.kts` –≤–∞—à–µ–≥–æ –º–æ–¥—É–ª—è –¥–æ–±–∞–≤—å—Ç–µ –±–ª–æ–∫ `ksp` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞.

```kotlin
ksp {
    arg("packageName", "com.myawesome.project")
    arg("defaultAnimation", "slideLeft")
    arg("viewModelInjector", "koin")
}
```
* `packageName` (**–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π**) ‚Äî –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º–µ–Ω –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
* `defaultAnimation` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `slideLeft`, `slideRight`, `slideUp`, `slideDown`, `fade`, `none`.
* `viewModelInjector` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) ‚Äî –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ ViewModel. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `koin`, `hilt`.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –≠–∫—Ä–∞–Ω–∞

–í—Å–µ, —á—Ç–æ –≤–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, ‚Äî —ç—Ç–æ –ø–æ–º–µ—Ç–∏—Ç—å –≤–∞—à—É Composable-—Ñ—É–Ω–∫—Ü–∏—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏–µ–π `@KoGenScreen`. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞–Ω—É—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

```kotlin
@KoGenScreen
@Composable
fun MyAwesomeScreen(
    // NavController –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    navController: NavHostController, 
    // –≠—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –±—É–¥–µ—Ç –ø—Ä–µ–≤—Ä–∞—â–µ–Ω –≤ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    myArgument: String,
    // ViewModel –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∏ –∏—Å–∫–ª—é—á–µ–Ω –∏–∑ —Å–ø–∏—Å–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
    viewModel: MyViewModel = koinViewModel()
) {
    // ... –≤–∞—à UI ...
}
```
–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ KSP —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —ç—Ç–æ–≥–æ —ç–∫—Ä–∞–Ω–∞.

### 2. –û—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å `ActionTo[ScreenName]` –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è `MyAwesomeScreen` –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∫–ª–∞—Å—Å `ActionToMyAwesome`. –ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —ç—Ç–æ—Ç —ç–∫—Ä–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é `extension`-—Ñ—É–Ω–∫—Ü–∏—é `MapsSafety`:

```kotlin
// –í—ã–∑–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
buttonClick = {
    navController.navigateSafety(
        ActionToMyAwesome(myArgument = "Hello from another screen!")
    )
}
```
–í–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –∏–º–µ–Ω–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å URL –≤—Ä—É—á–Ω—É—é ‚Äî –µ—Å–ª–∏ –≤—ã –∑–∞–±—É–¥–µ—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–ª–∏ —É–∫–∞–∂–µ—Ç–µ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø, –ø—Ä–æ–µ–∫—Ç –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è.

### 3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–ª—è –≤–∞—Å –≥–æ—Ç–æ–≤—É—é Composable-—Ñ—É–Ω–∫—Ü–∏—é `AppNavHost` (–∏–ª–∏ —Å –¥—Ä—É–≥–∏–º –∏–º–µ–Ω–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ `navHostName`), –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –≤–∞—à–µ–º UI.

```kotlin
@Composable
fun MainScreen() {
    // ...
    val navController = rememberNavController()
    AppNavHost(navController = navController)
}
```

---

## ‚ú® –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê–Ω–∏–º–∞—Ü–∏–∏ –ü–µ—Ä–µ—Ö–æ–¥–æ–≤

–í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏:

* **–ì–ª–æ–±–∞–ª—å–Ω–æ:** —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `defaultAnimation` –≤ –±–ª–æ–∫–µ `ksp` –≤ `build.gradle.kts`.
* **–î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞:** —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ `@KoGenScreen(animation = NavigationAnimation.Fade)`.

### –í–æ–∑–≤—Ä–∞—Ç –†–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –≠–∫—Ä–∞–Ω–∞

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –≤–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —ç–∫—Ä–∞–Ω.

#### –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–ª—é—á –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```kotlin
sealed class NavigationResultValues<T>(override val key: String, override val defaultValue: T) :
    NavigationResultKey<T> {
    data object ShowToast : NavigationResultValues<Boolean>("showToast", false)
}
```

#### –®–∞–≥ 2: –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ —É—Ö–æ–¥–µ —Å —ç–∫—Ä–∞–Ω–∞
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `popBackSafety` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `backStackData`.

```kotlin
// –ù–∞ —ç–∫—Ä–∞–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
buttonClick = {
    navController.popBackSafety(
        backStackData = BackStackData(NavigationResultValues.ShowToast, true)
    )
}
```

#### –®–∞–≥ 3: –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —ç–∫—Ä–∞–Ω–µ
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `getResultData` –≤–Ω—É—Ç—Ä–∏ `LaunchedEffect` –¥–ª—è "–ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è" —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
```kotlin
// –ù–∞ —ç–∫—Ä–∞–Ω–µ, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
LaunchedEffect(Unit) {
    if (navController.getResultData(NavigationResultValues.ShowToast) == true) {
        Toast.makeText(context, "It's a toast from nav result", Toast.LENGTH_SHORT).show()
    }
}
```
---

–ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ —Å–∞–º—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
